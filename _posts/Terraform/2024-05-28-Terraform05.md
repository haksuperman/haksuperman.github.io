---
title: "[Terraform] IAM Group 생성 후 정책 적용 및 IAM User 추가"      # 글 제목
date: 2024-05-28 16:41:00 +0900 # 작성 시간
categories: [DEVOPS, TERRAFORM]        # [대분류, 소분류]
tags: [terraform, iac, devops, dev, ops, aws, iam, user, group]     # 태그 (반드시 소문자로 시작 권장)
---
## 1\. IAM Group 생성

```terraform
// IAM Group 생성
resource "aws_iam_group" "develop_group" {
  name = "develop"
}
```
1. develop 이라는 IAM Group 생성
![image](https://blog.kakaocdn.net/dna/bR4MDd/btsHGa6RkZT/AAAAAAAAAAAAAAAAAAAAAEpUS0Q-3hTSPjl9q9kOeGuM_5iMX49fRnnbVyfl4udd/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1767193199&allow_ip=&allow_referer=&signature=Jdizuob5jVsnZ5ZUrkhs%2B1eGSPM%3D)

2. 정상적으로 생성된 것 확인
![image](https://blog.kakaocdn.net/dna/c4PGbv/btsHEo6x7tv/AAAAAAAAAAAAAAAAAAAAACeoii3IsBV2cggY_z_UlT5dpB6oRRtPRlC3kl861eUd/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1767193199&allow_ip=&allow_referer=&signature=ZptOcdSTb2xlQMDlUi0M2UHnqqQ%3D)

## 2\. IAM User 생성

```terraform
// IAM User 생성
resource "aws_iam_user" "haksu" {
  name = "haksu.god"
}
```

1. haksu.god 이라는 IAM User 생성
![image](https://blog.kakaocdn.net/dna/bkjtYG/btsHGkakO3L/AAAAAAAAAAAAAAAAAAAAAGE41t8d25-TTu4b-ZJd0h2o4d8LAJ4IZhsGGCfCYK7r/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1767193199&allow_ip=&allow_referer=&signature=SsSOFObvnuTimZ7dfyZ9EOcOhrQ%3D)

2. 정상적으로 생성된 것 확인
![image](https://blog.kakaocdn.net/dna/cuBs5B/btsHETkJNW5/AAAAAAAAAAAAAAAAAAAAAKXPHCQ7vThFDPiJFQQY0qwYIx8a9fclFEpMSozRMyy9/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1767193199&allow_ip=&allow_referer=&signature=YVD4qBUEgZFB4Wcvzg8KymSfrZg%3D)

## 3\. Policy 생성 및 생성한 develop 그룹에 Attach

```terraform
// Policy 생성
data "aws_iam_policy" "administrator_access" {
  name = "AdministratorAccess"
}

// 생성한 develop IAM 그룹에 생성한 정책 Attach
resource "aws_iam_group_policy_attachment" "name" {
  group = aws_iam_group.develop_group.name
  policy_arn = data.aws_iam_policy.administrator_access.arn
}
```

1. AdministratorAccess 권한을 가진 정책 생성 및 develop 그룹에 Attach
\-> AdministratorAccess 권한은 root 계정의 권한과 동일하다고 볼 수 있으니 꼭 필요 최소 권한만 부여하기(실습용으로만 부여)
![image](https://blog.kakaocdn.net/dna/mqsyo/btsHGeVBRFl/AAAAAAAAAAAAAAAAAAAAALN36KRjmRTtlDyZMvusFRCYNWgnEGp0x8IjwXRGwKhE/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1767193199&allow_ip=&allow_referer=&signature=4bgzXeOsgwm71kQaNpWc3txU%2FMA%3D)
![image](https://blog.kakaocdn.net/dna/d8ls1f/btsHDLgRZjv/AAAAAAAAAAAAAAAAAAAAAEW8w_-iyM1awLjuEfCfa889Sd3D26dK1qN2f1a0DCg9/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1767193199&allow_ip=&allow_referer=&signature=9IPCSXT%2BUx%2BsRpE2IjTR5mP6hUc%3D)

## 4\. develop 그룹에 haksu.got 계정 추가

```terraform
// IAM 그룹에 IAM User 추가
resource "aws_iam_group_membership" "develop" {
  name = aws_iam_group.develop_group.name
  users = [ aws_iam_user.haksu.name ]
  group = aws_iam_group.develop_group.name
}
```

1. 파이썬의 리스트 문법과 같은 개념으로 여러 IAM User 추가 가능
![image](https://blog.kakaocdn.net/dna/eC4PKq/btsHEqXF2uC/AAAAAAAAAAAAAAAAAAAAAEh6K3a1Ugi5zMrk8tddj3QtOzjNNKhO2MpVl3gIYiYf/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1767193199&allow_ip=&allow_referer=&signature=r0RHUrAFvNkPwe5WTJ3IEs5mx8o%3D)
![image](https://blog.kakaocdn.net/dna/vkNH6/btsHFLzDREC/AAAAAAAAAAAAAAAAAAAAAFZ0dk3yWXcgYPctsfC-xv5WgOv4LXUQje15TodnLQ6a/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1767193199&allow_ip=&allow_referer=&signature=dG7RiT9XDr0Vt7AH3ln2tONSrmI%3D)
