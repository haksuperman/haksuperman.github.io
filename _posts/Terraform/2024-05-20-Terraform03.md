---
title: "[Terraform] 테라폼 동작을 위한 사전 준비 (with. AWS Credentials, IAM 등)"      # 글 제목
date: 2024-05-20 20:26:00 +0900 # 작성 시간
categories: [DEVOPS, TERRAFORM]        # [대분류, 소분류]
tags: [terraform, iac, devops, dev, ops, aws credentials, iam]     # 태그 (반드시 소문자로 시작 권장)
---
## 1\. 테라폼 작업용 AWS IAM User 생성
1. 새 IAM User 생성
![image](https://blog.kakaocdn.net/dna/bxtJbe/btsHvYF6By6/AAAAAAAAAAAAAAAAAAAAAEAyn6dOEk1WskN0MZMFwXz8LAbEgYoSR52UiwJNXdFU/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1767193199&allow_ip=&allow_referer=&signature=1FABvOitREhIIg7EtKEBCtFGaFE%3D)

2. 유저명, 패스워드 설정(테라폼으로 작업한 내용이 잘 적용됐는지 확인 하기 위한 용으로 AWS Management Console 접속 허용)
![image](https://blog.kakaocdn.net/dna/bCt1x5/btsHv4MYNlb/AAAAAAAAAAAAAAAAAAAAAGydHsAAerX0eLOAyAgh5DD0o8CY3CuIiRgMmcvP9D9x/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1767193199&allow_ip=&allow_referer=&signature=jU1prxewydoRlAqU71%2F1a0UBbpY%3D)

3. 해당 IAM User가 사용할 권한 부여
![image](https://blog.kakaocdn.net/dna/eoZ9rx/btsHwx2dKRN/AAAAAAAAAAAAAAAAAAAAAAgMSZJeNzlt4GxJ4ij9QbuEjkYNr4HfyrEyA9RktLG4/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1767193199&allow_ip=&allow_referer=&signature=Y1dGBeKXIv1d03fFTS54SM6nle4%3D)

    > Terraform으로 작업할 최소한의 권한만 부여 해야 함!  
    > 실습을 위해 AdministratorAccess 권한을 부여한 것, 절대 위험!!!  
    > (추후 권한 관련 IAM 공부는 꼭 하기)
    :{ .prompt-warning}

4. 생성할 IAM에 태그 추가
사실 테라폼 작업 시 꼭 필요한 설정은 아닌 것 같긴 하지만, 나중을 위해 태그는 많을수록 좋다 했으니 설정 :)
![image](https://blog.kakaocdn.net/dna/bekiZF/btsHum2oc7f/AAAAAAAAAAAAAAAAAAAAAJ8qQOPmcYSd5LHRHos505PUypye3eg3jcB06mkMa_p6/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1767193199&allow_ip=&allow_referer=&signature=fzbIyAk6t%2BwWW7qGFTBdjZV9O7g%3D)

5. 생성한 IAM 로그인
![image](https://blog.kakaocdn.net/dna/NaAKu/btsHu4z7M5M/AAAAAAAAAAAAAAAAAAAAAI1XKw0gIxdaMp9C-fbGKeInauj-MXi8kn7TFStsfA07/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1767193199&allow_ip=&allow_referer=&signature=UgAvmNbYo6W8f%2BcyAoCBRWe%2FB%2Bo%3D)

## 2\. MFA 설정

이대로 진행해도 되긴 하지만, 보안을 위해 2차 보안 인증을 설정해야 한다.

1. Security credentials 선택
![image](https://blog.kakaocdn.net/dna/qA2Qn/btsHu8JbhCP/AAAAAAAAAAAAAAAAAAAAAC1j6H2kMSx9a9IsTxWmwpJe-jttnwlDo3juWvd5glhT/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1767193199&allow_ip=&allow_referer=&signature=gLi8FWET%2F5Ay2r%2BDhc8g1s772tM%3D)

2. MFA 장비 연동
![image](https://blog.kakaocdn.net/dna/mlxBy/btsHvZLNldW/AAAAAAAAAAAAAAAAAAAAAMfqvlNtKF8szteMzME-9bC3BQhYezZtaL5RhTdwAyD4/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1767193199&allow_ip=&allow_referer=&signature=%2FMM5EBcUTC0QMwfU591vha%2FC4II%3D)

3. 인증 어플과 해당 MFA를 구분할 수 있도록 이름 부여
![image](https://blog.kakaocdn.net/dna/bAjR4u/btsHu9Bjltr/AAAAAAAAAAAAAAAAAAAAALjGHNzHDMPtIiHqCti9pMFJM7480B0V9i66kGPwIqFq/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1767193199&allow_ip=&allow_referer=&signature=41OcjwCV9kjc3hRyQgJeiD%2FIvbg%3D)

4. QR 코드와 생성된 MFA 코드 인증을 통해 인증 어플(Google Authenticator)과 연동
![image](https://blog.kakaocdn.net/dna/DlldS/btsHwqIQPEy/AAAAAAAAAAAAAAAAAAAAAIbZwM6tn1jXAl_QBRKknqKcr8FsdxVVFqMfxuFNfBLc/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1767193199&allow_ip=&allow_referer=&signature=WpnPvb0x1FOt%2FSiBaHC9WBoyoos%3D)

5. 장비 추가
![image](https://blog.kakaocdn.net/dna/cSttoO/btsHu14wFA1/AAAAAAAAAAAAAAAAAAAAAKOU2JyAY5qqmF1-MURd66ZubVFUDy0W7iRxkREwd-G-/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1767193199&allow_ip=&allow_referer=&signature=cLIfqeSfOunjnwyGGyqg4CHHbgQ%3D)

6. AWS에서 출력한 QR 코드 스캔
![image](https://blog.kakaocdn.net/dna/bH2ShU/btsHwafd9ky/AAAAAAAAAAAAAAAAAAAAAHdW_RlKvUsK6wdyBpfYTpPRWNEX_NR7ikYpKuOab200/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1767193199&allow_ip=&allow_referer=&signature=tMdFe%2BJ8W35yK4kwyZYjGNxNa7Y%3D)

7. 장비 추가 완료
![image](https://blog.kakaocdn.net/dna/LynU6/btsHwxA9ls7/AAAAAAAAAAAAAAAAAAAAAKf_1tZM50BvJUnuN6XbiIlCi__H-pvggrBVrqVOd0cO/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1767193199&allow_ip=&allow_referer=&signature=8dq8HKa6tWyzr9DHnYSaC8bP5EA%3D)

8. 인증 어플에서 생성된 MFA 코드를 두 번 입력해 인증 받기
![image](https://blog.kakaocdn.net/dna/c20s8o/btsHv40vB0g/AAAAAAAAAAAAAAAAAAAAACMdKbmpTJAaY_agBxX8o3VaUr-t6HO345iUYvVDFS6G/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1767193199&allow_ip=&allow_referer=&signature=tZBRnPewcvjPBF65bIG0M3HHgiU%3D)

## 3\. WSL CLI 환경에서 AWS Credentials 인증을 위한 Access Key 생성

1. Access Key 생성
![image](https://blog.kakaocdn.net/dna/cnBu4C/btsHuxJqgHw/AAAAAAAAAAAAAAAAAAAAAM3ICxjvoC7v-l0nmvr-qGos2WXirzCgfRWuslHtoT0h/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1767193199&allow_ip=&allow_referer=&signature=fkfaGN9dS0DgpmYJV8yVXLwl6hU%3D)

2. CLI용으로 생성 및 '위의 권장 사항을 이해하였으며 Access Key 생성을 진행하겠다' 안내 문구 체크
![iamge](https://blog.kakaocdn.net/dna/bIZJfJ/btsHwgl5tj8/AAAAAAAAAAAAAAAAAAAAAGMc1wFaPnNHNPIC3FtbHOJfKRINljKxn_8OeKHD-rmV/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1767193199&allow_ip=&allow_referer=&signature=81fkfAY5fklrYa5e5zdauzGRgQ8%3D)

3. 첫 번째 Access Key 생성
![image](https://blog.kakaocdn.net/dna/nlrfk/btsHurP7SzC/AAAAAAAAAAAAAAAAAAAAALAlVz3dvKLy6tAsYdmBRlTdLLMwFLtwo_FTARDxLJwj/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1767193199&allow_ip=&allow_referer=&signature=y1GtPObhUIVCR1SR0hH0D3vvnNM%3D)
Access key와 Secret access key는 추후 다시 확인할 수 없다! (적어도 내 얕은 지식으로는...)<br>
아니면 아래 .csv 파일을 다운 받아 추후에 파일로 확인할 수는 있다.

4. 두 번째 Access Key 생성
난 그래서 따로 메모장에 첫 번째, 두 번째 적어 놓는다.
![image](https://blog.kakaocdn.net/dna/cESolA/btsHwPBzhEf/AAAAAAAAAAAAAAAAAAAAABp7BZHTr4Jxfu3l1HU4w5Zc7iSGZWb9b4YlZZb6trEV/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1767193199&allow_ip=&allow_referer=&signature=BFT0upCPjve%2FEVzFal4qWE4Ao7w%3D)

5. Access Key 두 개 생성된 것 확인
![image](https://blog.kakaocdn.net/dna/2D2Ew/btsHuQB1ydU/AAAAAAAAAAAAAAAAAAAAAPQrmmmyuwCGCio9gPfrIL_XUl-AjfyI1NO9jIMRkK_E/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1767193199&allow_ip=&allow_referer=&signature=YtXbycsnhSCJG1QkoCZHimiijrk%3D)

## 4\. Credentials 정보 등록
1. aws configure 명령으로 Credential 정보 등록
![image](https://blog.kakaocdn.net/dna/RNBUV/btsHwPBz9vY/AAAAAAAAAAAAAAAAAAAAAI38dnwQ_429S4xABBrLtTgVTfdM5_5FkRV8M43yN0b0/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1767193199&allow_ip=&allow_referer=&signature=8k4GIIvpwhgTt0MpZboVicCBuuY%3D)

2. ~/.aws/credentials 파일에서 등록한 Credentials 정보 확인 가능
![image](https://blog.kakaocdn.net/dna/byOJdr/btsHunNK140/AAAAAAAAAAAAAAAAAAAAAOyA1EEbT82rayWmVqasBoWMvpa3Ho2MozBKcF38t138/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1767193199&allow_ip=&allow_referer=&signature=mjdAZFxwQTiiIMKFLh9qNW%2Bt8X0%3D)

## 5\. 작업 경로 구성 및 VSC 실행 방법
1. 하나의 테라폼 프로젝트 작업용 디렉터리 생성
![image](https://blog.kakaocdn.net/dna/FZKWH/btsHvXtGfBl/AAAAAAAAAAAAAAAAAAAAAMZ5gywAKLMie9rqrSq1cDgeGbwYtYlqsCEMb0lfoqTc/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1767193199&allow_ip=&allow_referer=&signature=oBEbCEGpNoxeVkoaQcyWsoyCrrE%3D)

2. 해당 위치에서 code . 명령으로 VSC 실행
![image](https://blog.kakaocdn.net/dna/c4TNrZ/btsHuzN3Bey/AAAAAAAAAAAAAAAAAAAAADnCWXMAkFaAtkKnuLMAcwvvMCpc28QWJCmHvRardqyv/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1767193199&allow_ip=&allow_referer=&signature=IPy7Hwy2HTKeLmL3NnfMwb3InN0%3D)

3. 자동으로 VSC 실행
![image](https://blog.kakaocdn.net/dna/duR4wc/btsHv733h8q/AAAAAAAAAAAAAAAAAAAAAMC0cahQSP6Phbli_yeC17mBBtX8g2xn35tsN7kGAm8i/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1767193199&allow_ip=&allow_referer=&signature=O7r8TwLa%2FwKvBKbgFPzRW8Dso1M%3D)