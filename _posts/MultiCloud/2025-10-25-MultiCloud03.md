---
title: "[Multi Cloud] AWS-OCI VPN Turnel 이중화 (BGP)_3.AWS-OCI VPN1 구성(OCI)"       # 글 제목
date: 2025-10-25 19:59:00 +0900        # 작성 시간
categories: [CLOUD, MULTICLOUD]        # [대분류, 소분류]
tags: [aws, oci, vpn, turnel, bgp, asn, duplication]     # 태그 (반드시 소문자로 시작 권장)
---
## 3.1. CPE

### 3.1.1. AWS 측 VPN Turnel 1 IP 확인

-   Virtual Private Gateway 항목 확인
-   OCI 측에서 CPE IP에 해당
![image](https://blog.kakaocdn.net/dna/cBAmGb/dJMb9MXdam3/AAAAAAAAAAAAAAAAAAAAAKyK5ykw-UhO8r_4dSh6_6mNTWFn9hstx2FFSmLK_XUt/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1767193199&allow_ip=&allow_referer=&signature=jflIMW2OBMVBeoLuJbMN27Uel00%3D)

### 3.1.2. 설정

1. 내비게이션 메뉴 → Networking → Customer connectivity → Customer-premises equipment
![image](https://blog.kakaocdn.net/dna/dE0le0/dJMb9X5qhOX/AAAAAAAAAAAAAAAAAAAAAE2sSDqcuVvJNFnbMtsVLRGRidod5xwdyAhnyyiCBTBU/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1767193199&allow_ip=&allow_referer=&signature=cEj8lYHg0q2AjF9GA%2BqoZYLfDVM%3D)

2. Create CPE
- Name : \<적절한 이름 입력>
- IP address : \<위에서 확인한 AWS 측 VPN Turnel 1 IP 입력>
- Vendor : Other
![image](https://blog.kakaocdn.net/dna/cYV2rm/dJMb9PsSaQ6/AAAAAAAAAAAAAAAAAAAAADe9PSDnmAVkinQh8zoGTQX8bbr9j7KVOjQ81fcsrrZf/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1767193199&allow_ip=&allow_referer=&signature=pKDqaqoWuQyZ5Y%2FULoAodzvMAhU%3D)

3. 생성 확인
![image](https://blog.kakaocdn.net/dna/dxe5e2/dJMb9MQrv90/AAAAAAAAAAAAAAAAAAAAANhfuwG6UGehOFypRjcFu4jCz2Ajr-eMPjhuUQUwwUVg/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1767193199&allow_ip=&allow_referer=&signature=Kc6sl2PSht6yRRaOUNBYysUqlHI%3D)

## 3.2. VPN

### 3.2.1. 기본 생성

1. 내비게이션 메뉴 → Networking → Customer connectivity → Site-to-Site VPN
![image](https://blog.kakaocdn.net/dna/blH1FP/dJMb9MQrwax/AAAAAAAAAAAAAAAAAAAAAKJ3Tl4hGljPc-B9KEX2G2self7NfOTNI7ywE_2AO4gZ/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1767193199&allow_ip=&allow_referer=&signature=ALeUpWbdwmojjFVaT%2FheVOCnmiA%3D)

2. Create IPSec connection
- Name : \<적절한 이름 입력>
- Customer-premises equipment : \<위에서 생성한 CPE 선택>
- Dynamic routing gateway : \<OCI 측 네트워크에 Attach된 DRG 선택>
- Static routes to on-premises network : \<AWS 측 VPC Subnet CIDR 입력>
![image](https://blog.kakaocdn.net/dna/blmqrg/dJMb9N9FdQC/AAAAAAAAAAAAAAAAAAAAAM3Zm9EJvLvMXIuTl62px060xFo3GIWsBEQMLlIY8Vc8/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1767193199&allow_ip=&allow_referer=&signature=JESVMMgFGdqEebZAtH6vNX%2FEHJ8%3D)

> VPN을 BGP로 구성하는 경우, 해당 Static route to on-premises network 설정은 무시됨
{: .prompt-info }

### 3.2.2 Turnel 1 (+Turnel 2)

1. 기본 정보
- Name : \<적절한 이름 입력>
- IKE version : IKEv2 선택
- Routing type : BGP dynamic routing 선택
![image](https://blog.kakaocdn.net/dna/bHue8E/dJMb86ae4ko/AAAAAAAAAAAAAAAAAAAAADkRV5UVS1eTC5QaLoyNhqAC8K7yhuOSWRjaTHwGLhqb/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1767193199&allow_ip=&allow_referer=&signature=QM%2B9fOTKLaNBP2mqqg5Kw4PZ0g0%3D)

2. BGP 정보
- BGP ASN : \AWS 측 ASN 입력>
- IPv4 inside turnel interface - CPE : \<AWS 측 Virtual Private Gateway 항목 입력>
- Pv4 inside turnel interface - Oracle : \<AWS 측 Customer Gateway 항목 입력>
![image](https://blog.kakaocdn.net/dna/oiMLe/dJMb9Lqs8Lk/AAAAAAAAAAAAAAAAAAAAACGaPdgd0E2JjMR1vZcMgNhwwo0zTLF690c_a20q2ayk/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1767193199&allow_ip=&allow_referer=&signature=BziHNAGzM341nFX6TymA9ixeudo%3D)

3. Phase 1 → AWS 측 정보와 일치
- Encryption algorithm
- Authentication algorithm
- Diffie-Hellman group
- IKE session key lifetime
![image](https://blog.kakaocdn.net/dna/cvbnqu/dJMb9N9FdRI/AAAAAAAAAAAAAAAAAAAAAFOBJuSKqN7I6SbtfGSykytu8x6N7FPlia903jNlCevv/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1767193199&allow_ip=&allow_referer=&signature=sSv5YGj23IEqKCxxqTBqmQi9iLM%3D)

    > AWS에서 Turnel 알고리즘 정보를 변경하지 않고 Default로 생성한 경우, 위 Configuration 파일과 같이 Phase 별 알고리즘 정보가 하나만 표기 (실제 아래 사진과 같이 모두 체크되어 이용할 수 있으나 OCI 측에서 설정되어야 하는 알고리즘 정보를 오해하기 쉬움)  
    > ![image](https://blog.kakaocdn.net/dna/cBB0Hz/dJMb9WenlLV/AAAAAAAAAAAAAAAAAAAAAI-3SQ9CNj75_uJfIo7qiBWeEFTwg8M5tZlB2XC-YVfT/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1767193199&allow_ip=&allow_referer=&signature=tpsJy2QNDB%2BYy91edlNMKZlt6l4%3D)
    > ![image](https://blog.kakaocdn.net/dna/veF1M/dJMb9WenlL0/AAAAAAAAAAAAAAAAAAAAANGTNKnOVYp3nnFWnrzWEfKzBVXPB4d_xfOJXnHJEjJx/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1767193199&allow_ip=&allow_referer=&signature=xGBWPbi1Km5XRZLEqcqm2IQHnbw%3D)
    {: .prompt-info }

4. Phase 2 → AWS 측 정보와 일치
- Encryption algorithm
- IPSec session key lifetime
- Deffie-Hellman group
![image](https://blog.kakaocdn.net/dna/cIiPRf/dJMb9PsSaV4/AAAAAAAAAAAAAAAAAAAAAJ64UdhHFdtmowvLbKANQAvL4LxQY0mAOWwdLUYpltqD/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1767193199&allow_ip=&allow_referer=&signature=7OVX1lF0jTQ7qeftPgGKphlbkDI%3D)

    > Turnel2는 이용하지 않지만, 동일한 방법으로 구성
    {: .prompt-info }

5. 생성 확인
![image](https://blog.kakaocdn.net/dna/bBr7nx/dJMb8XqP0Ni/AAAAAAAAAAAAAAAAAAAAAPbuDVlZKeA4Rx3trEkbEck6MvBNccsNdPB45PzwLse9/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1767193199&allow_ip=&allow_referer=&signature=kgqQOGLnMO2G12JflrRzoSAOIo0%3D)


### 3.2.3. Turnel configuration

1. 생성한 turnel1 선택 → 우측 상단 Open CPE configuration helper 선택
![image](https://blog.kakaocdn.net/dna/rhaUA/dJMb87UwD0w/AAAAAAAAAAAAAAAAAAAAAKkQIdj6YrxBxk5XlmH3dFc00BnJlXyH3MiEgEJVSL8y/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1767193199&allow_ip=&allow_referer=&signature=28S41mRfrfGdH9Obyk438iLtqIQ%3D)

2. 우측 하단 Create content 선택
![image](https://blog.kakaocdn.net/dna/cgUUsd/dJMb9NhwpJA/AAAAAAAAAAAAAAAAAAAAAHzINCoPEeb7rop_lXgcO7EngTv0xos6fUyKVPETjmpm/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1767193199&allow_ip=&allow_referer=&signature=JTyl05btr8uVUkdcgWFO2Zcohz0%3D)

3. Download configuration 클릭
![image](https://blog.kakaocdn.net/dna/ckhmrA/dJMb87UwD2s/AAAAAAAAAAAAAAAAAAAAAJLw5xeHRmny1QZQdTlIYqh4f8QAenR8uvXPa3xHXINy/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1767193199&allow_ip=&allow_referer=&signature=I6vwlqizaAZfITlqSeuWb%2FvHnSc%3D)

4. Turnel IP 및 PSK 확인
![image](https://blog.kakaocdn.net/dna/OXi5c/dJMb9PTWodZ/AAAAAAAAAAAAAAAAAAAAAC7eAmQu0N2j1Xmm42jK6IfFoDpR4a9hVK63P_AXjOMu/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1767193199&allow_ip=&allow_referer=&signature=%2FIjGl3jxyGMSYd3Jp5fVC5dm1A4%3D)