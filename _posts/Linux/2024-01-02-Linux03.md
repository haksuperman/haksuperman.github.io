---
title: 리눅스 권한의 개념, sudo 명령 등      # 글 제목
date: 2024-01-02 01:24:00 +0900 # 작성 시간
categories: [ON-PREMISE, LINUX]        # [대분류, 소분류]
tags: [linux, sudo, permission]     # 태그 (반드시 소문자로 시작 권장)
---
SetUID

 \- SetUID가 설정된 파일을 실행하게 되면 Shell에 접속한 사용자 -> 실행 파일의 소유자 권한으로 변경해 실행함

 \- 일반 사용자가 SuperUser의 권한을 행사하고 싶을때마다 해당 권한을 획득하는 것보다는 SetUID를 이용해 해당 파일을 실행할 때만 관리자(SuperUser) 권한으로 실행

\-> 이러한 모든 실행 파일의 소유자는 root 소유자임(관리자 권한으로 무언가를 실행하고 싶을 때 사용할 일이 많기 때문

ex) find 같은 명령어가 SetUID 설정된 명령어 파일임

find로 SetUID 설정된 root 소유자 파일 찾아보기

![image](https://blog.kakaocdn.net/dna/kV6jG/btsCWJ0xx7v/AAAAAAAAAAAAAAAAAAAAACPngZK7vjEutDDRodP5hRlI63xodzM8Htt272z_nv0S/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1767193199&allow_ip=&allow_referer=&signature=GW8nWd2ETbLY8fr6UkU3G1uYekE%3D)

sudo find / -user root -perm -4000

![image](https://blog.kakaocdn.net/dna/cRXJD7/btsCQpWDCzV/AAAAAAAAAAAAAAAAAAAAALGQAvCCmlJsCfl8nw5pEFxzYKhRVm6D-3Hnmx3PwU5i/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1767193199&allow_ip=&allow_referer=&signature=1dircLlKlzH91jHn1tbXfXRyrkI%3D)

소유자 권한에 s(SetUID), 소유자에 root

![image](https://blog.kakaocdn.net/dna/SpwfJ/btsCUydXFKP/AAAAAAAAAAAAAAAAAAAAAG_5WYR7PVfvOZKWtQagPC8CICj2RWDEMW3ex2jmXc8l/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1767193199&allow_ip=&allow_referer=&signature=uVf788BQ%2FuDa0xnO%2FFsAklWj%2BLg%3D)

sudo 그룹에도 속해 있음

![image](https://blog.kakaocdn.net/dna/vMTJ5/btsCSA4qRhr/AAAAAAAAAAAAAAAAAAAAAOOPPjzjMhhSo86P2w_vE9I4Blhk0--XlgcSDSsb1HnQ/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1767193199&allow_ip=&allow_referer=&signature=1T%2FIcGfHsYDBsjwby7ZbHLO9Bl4%3D)

 \- 일시적으로 root 권한 획득 가능(이전에 ' dkagh1. '으로 sudo 한번 접속해서 캐시 남아있어서 획득 가능, 자기 자신의 암호를 입력함)

 \- 슈퍼유저로 잠시 대체

![image](https://blog.kakaocdn.net/dna/cdjySz/btsCSCBbKCL/AAAAAAAAAAAAAAAAAAAAAKsBFSRYcqlFCESA0GR4mfxoO15cqtMThWvBHvcvFu0o/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1767193199&allow_ip=&allow_referer=&signature=Tbc2ex7%2B1KYt81ovjm4HhAlFsjY%3D)

 \- 사용자를 root로 대체하겠다라는 의미(root의 패스워드를 입력함)

 \- 쉘 자체를 다른 사용자로 대체

![image](https://blog.kakaocdn.net/dna/b2cZOn/btsCRe8n82b/AAAAAAAAAAAAAAAAAAAAABANJO4YzgVmKTOoEeRMQ6s0pAHT47QSXh2QyZ6U3UIx/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1767193199&allow_ip=&allow_referer=&signature=ysMU8UjFV7Z5aGSTfobkIHNhHjI%3D)

sudo 명령으로 useradd abc의 명령이 수행됨(관리자 권한을 일시적으로 획득해서)

![image](https://blog.kakaocdn.net/dna/Qu4Hw/btsCTYKEzVM/AAAAAAAAAAAAAAAAAAAAAI_0SE5Ym3UqNkBZ6DjGqWvf3Vz1A_GfVs1pSmTGUDa9/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1767193199&allow_ip=&allow_referer=&signature=%2B%2F3E6Lbsnbgqwk4UkFo2Y4rsnMQ%3D)

sudo 명령으로 일시적으로 관리자 권한을 획득해서 userdel 명령 사용 가능

![image](https://blog.kakaocdn.net/dna/dq2h0E/btsCP3lUrxY/AAAAAAAAAAAAAAAAAAAAANPookKGc-nnkZPBRCv93TDkytaR3pPyU8SHq7WJD7dc/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1767193199&allow_ip=&allow_referer=&signature=xRelYznQXQllrzeEvIQb22i0N1s%3D)

 \- sudo 그룹에 포함되어 있어야 해당 계정으로 sudo 사용 가능

 \- sudo 그룹 자체에도 해당 권한이 부여되어 있어야 sudo 그룹에 속한 계정으로 sudo 가능(꼭 sudo 그룹이 아니어도 다른 그룹에 해당 권한이 있으면 다른 그룹도 sudo 가능함)

 \- root의 허락이 있어야 해당 그룹에 속할 수 있음

![image](https://blog.kakaocdn.net/dna/bPJ869/btsCWJTLiG1/AAAAAAAAAAAAAAAAAAAAAICnudyepPwFYqcvrgZdhDe3OMgYQnC42ZoUy3n9Be79/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1767193199&allow_ip=&allow_referer=&signature=0TVva4A%2BfRR%2B3WNOm0dsW1k6YXY%3D)

sudo visudo

![image](https://blog.kakaocdn.net/dna/cwBOfI/btsCZhWZFxJ/AAAAAAAAAAAAAAAAAAAAAM63p8tYfktgS8WZV3SmFfqJW_2t8Hm7wESKtMoidSGB/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1767193199&allow_ip=&allow_referer=&signature=y3%2FnOI%2Bu5PsuGzN%2B5ZHqtJ7CLxM%3D)
![image](https://blog.kakaocdn.net/dna/snxzi/btsCOFexNew/AAAAAAAAAAAAAAAAAAAAAHw-1WyDdseAjrdtAAFCXpT1Bxl5zXeXYoZIgEA5KLtK/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1767193199&allow_ip=&allow_referer=&signature=uNlp13gzJkOnLnjf5lvT88CisOA%3D)

일반 사용자(ubuntu)로는 해당 파일 수정 권한 없음(read only)

![image](https://blog.kakaocdn.net/dna/bL9M8q/btsCWJsGmwL/AAAAAAAAAAAAAAAAAAAAAIoJNRoBnJ1XF8c1GTYHMNYLTc7P1Uju9k0A3GFF2ktw/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1767193199&allow_ip=&allow_referer=&signature=cmt7ATuT1cUQOxHKE2Mh1vebhjw%3D)

관리자 권한을 획득해 접속하면 수정 가능

![image](https://blog.kakaocdn.net/dna/cGtbZ8/btsCP2N2JKx/AAAAAAAAAAAAAAAAAAAAAID7Wytf_obzZTShQJPAGSSQhIr_KCWgJ6PwqJ8Ptxih/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1767193199&allow_ip=&allow_referer=&signature=T4dyXZe5Y%2FSEo8uCFUwPiXJMKhM%3D)

nano 명령을 사용하면 윈도우의 노트패드와 같은 방식으로 사용

![image](https://blog.kakaocdn.net/dna/lBeW8/btsCTxzKdvh/AAAAAAAAAAAAAAAAAAAAAMLV-GlYcZ0tIiansjYMee7crEgPmnwvT211xwgY23Hk/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1767193199&allow_ip=&allow_referer=&signature=lPzm%2BlMZ40NjLOEq%2BvRYpFjlhpI%3D)

ctrl + x 로 종료

(큰 파일은 vi에디터로 하는 것이 편리하고, 작은 파일은 nano가 유용할 수 있음)

\* 여러 작업을 해야할 때는 sudo -i 로 아예 계정 변경 후 작업하는 것이 편리하고, 일시적인 작업에는 sudo 명령으로 한번만 관리자 권한 획득 후 작업하는 것이 편함

![image](https://blog.kakaocdn.net/dna/b4ddy0/btsCWLYklfQ/AAAAAAAAAAAAAAAAAAAAALqV3dqvHZoaK5TadfrnWDqmchoKomg8ix7BGDO5Une7/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1767193199&allow_ip=&allow_referer=&signature=kTwP3x2Zb5RGcrGE2AsZN63ZwCA%3D)
![image](https://blog.kakaocdn.net/dna/blCj5G/btsCTzYssyO/AAAAAAAAAAAAAAAAAAAAAGUFjRfwTjuF4mGE9k73Gv5Q8MAZzFnX1KBb-bN8PaGQ/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1767193199&allow_ip=&allow_referer=&signature=sivlt38aT4HTY%2FQ05VsyXH7u44g%3D)

홈 디렉터리에 복사했기 때문에 ubuntu 소유자로 복사된 것

(소유자에 따른 권한이 달라서 연습하려고 복사해온 것)