---
title: IP, 서브넷팅(Subnetting), CIDR(Class Less Domain Routing)      # 글 제목
date: 2024-01-01 18:55:00 +0900 # 작성 시간
categories: [ON-PREMISE, NETWORK]        # [대분류, 소분류]
tags: [network, ip, subnetting, cidr]     # 태그 (반드시 소문자로 시작 권장)
---
### 1\. Intarnet/Extranet

-   Intra Net : 기업 내부 사설망 형태
-   Extra Net : 기업 내 인트라넷 이외의 사설망 형태

### 2\. VPN

-   Site to Site : 터널링 개념(ex. 서울지사와 부산지사를 연결 / 재택근무 시 서울지사와 User를 연결)
-   ex) AWS망과 Private망(OpenStack)을 터널링 해서 같이 사용할 수 있게(하이브리드 클라우드)
-   ex) AWS망과 GCP망을 터널링 해서 두 개 이상의 CSP를 이용할 수 있게(멀티 클라우드)

### 3\. LAN

-   Ethernet : CSMA/CD(MAC:Media Access Control, MAC주소 x) 기술 활용
-   Ethernet Switch(WAN Switch x)라는 장비를 통해 연결성을 확보(RJ45 포트)

![image](https://blog.kakaocdn.net/dna/8RxfO/btsCUyLJ9vG/AAAAAAAAAAAAAAAAAAAAALUIw27nZjLYiMcIujOYAmmO5a1G7oxpVMXpSXE3dx4_/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1767193199&allow_ip=&allow_referer=&signature=y6AT4PaBwRRfeUVsUoajXlYl9Lo%3D)

시스코 장비의 경우 장비명이 2950(L2)/3660(L3)와 같이 이루어짐

(L2스위치는 Access Layer에서, L3스위치는 Distribution Layer에서 사용)

\=> 네트워크 구성 시 각 구간 별 데이터의 양이나 속도 등을 고려해서 맞는 장비를 선택해야 함

\* 버퍼(Buffer) : 받아들이는 데이터를 버퍼에 저장시켜 일정량 저장되면 한번에 내보냄, 들어오는 양이 적어 내보내는 양이 부족해지면 버퍼링이 생기는 것(캐시랑은 뭐가 다른지 확인해보자)

![image](https://blog.kakaocdn.net/dna/7uOFn/btsCVHuTibr/AAAAAAAAAAAAAAAAAAAAANZ-PG_bSZjE8-kWGt8Dj2sa1qBhKTnDhdabQmS1sdJT/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1767193199&allow_ip=&allow_referer=&signature=BpLZ3ALDlg5bnJQ%2B0EQzxKqerE0%3D)

LAN과 WAN 구간을 이렇게 나눌 수 있음

(라우터의 아웃 인터페이스를 WIC / 내부 인터페이스를 NIC)

※ 대역폭(Bandwidth)

-   데이터가 한번에 전송할 수 있는 폭, 고속도로 차선 개념(한번에 보낼 수 있는 양이 다름)
-   (ex. 같은 대수의 차량을 기준으로 2차선 도로에서 이동하는 차량들이 도착하는 속도와 8차선 도로에서 이동하는 차량의 도착하는 속도가 다름)
-   10Mbps(1초에 10,000,000bit 전송 가능) / 100Mbps / 1000Mbps / 10000Mbps
-   ( b(bit) p(per) s(second) -> 1초에 몇 비트를 보낼 수 있는지 )

※ 백본 스위치와 같은 좋은 스위치를 쓰는 이유

-   코어 계층은 속도가 중요하기 때문에 이러한 속도가 좋은(대역폭이 넓은) 스위치인 백본 스위치를 사용하는 것

-   Baseband(KT) : 10KM 미만
-   디지털 신호를 변조하지 않고 그대로 전송하는 방식
-   데이터 전송 품질 우수, 별도의 모뎀 불필요
-   10KM 미만 근거리 전송에 사용

-   Broadband(SK) : 10KM 이상
-   디지털 신호를 여러 개의 신호로 변조해서 다른 주파수 대역으로 동시에 전송
-   동시에 전송하기 때문에 하나의 통신 선로에 여러 개의 채널을 사용하여 전송
-   10KM 이상 장거리 전송에 사용

\=> KT와 SK에서 사용하는 통신 방식은 아예 기술이 다른 것

### 4\. WAN

-   다양한 기업들이 ISP 업체에 연결되어 있고(KT ISP-KG그룹), 이러한 여러 ISP 업체들을 IX 장비로 연결해 국내망으로 사용(KT ISP-Dacom ISP), 각자의 국내망들을 해저케이블로 연결(한국-미국)

![image](https://blog.kakaocdn.net/dna/brjEPi/btsCUx0mAWg/AAAAAAAAAAAAAAAAAAAAANlUzaVrzYP6skd21wDlbNl2SIP_WSATNzWQm6dgi7rS/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1767193199&allow_ip=&allow_referer=&signature=Mh2Vd%2F%2FWCpkCHG37c%2F7hQoCsIV4%3D)
해저케이블망  

-   WAN 구간(Serial 구간)은 번개모양으로 표현(ISP가 개입), WIC 이용(LAN 구간은 직선으로 표현, NIC 이용)
-   ATM, (A)DSL, PPP, HDLC, Frame-Relay, X.25 등의 프로토콜 사용

### 5\. Internet

-   ISP 업체에서 제공해주는 망

### 6\. IP

-   ​물리적인 디자인 과정 이외 논리적인 IP 디자인도 같이 해야함
-   IPv4 : 2의 32제곱, 2진수(00001010.00000001.000000001.00000001), 10진수(10.1.1.1 -> 8bit 4옥텟)
-   2의 8제곱 : 256개(0~255) \* 4옥텟 = 2의 32제곱 : 약 43억개
-   IPv6 : 2의 128제곱, 2진수(00001010.00000001.00000001.00000001), 16진수

-   네트워크 디자인할 때 IP 구성을 나중에 합칠 것(Summary)을 고려하고 구성해야 함
-   IP를 합칠 때에는 2의 지수 단위 개수로 합쳐야 함(2진수 비트 연산이기 때문에)
-   (ex. 5개의 호스트가 사용해야 하는 네트워크를 구성할 때 2의 3제곱(8)의 호스트ID가 필요, 2의 2제곱(4)으로는 부족함
-   \-> 2의3제곱(8) 단위로 합쳐야 하면 0~7/8~15….로 해야 함, 1~8/9~16...은 불가
-   \-> .7과 .8을 합치고 싶으면 0~7/8~15로 합친 후 합쳐진 걸 다시 합쳐서 .7과 .8을 합쳐야 함)

-   Class A : /8 => 16,777,216개의 호스트를 가짐
-   Class B : /16 => 65,536개의 호스트를 가짐
-   Class C : /24 => 256개의 호스트를 가짐
-   Class D : 멀티캐스트용으로 사용
-   Class E : 미래 연구용으로 사용
-   \=> 유동적으로 IP를 부여할 수 없어 이 단위로만 주게 되니, IP 낭비가 심해짐(NAT, 사설IP, 서브넷팅 등 여러 기술들이 나타남)

[www.iana.org](http://www.iana.org/)

![image](https://blog.kakaocdn.net/dna/dUzDME/btsCZ3qFGp4/AAAAAAAAAAAAAAAAAAAAABQtgZMDq3VZ9Tp6-MCuI3e5LMydkMGJ-UxWJ0vFGa8J/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1767193199&allow_ip=&allow_referer=&signature=pxTfYtL9DluU7sVIt4o1coeSSwo%3D)
A클래스 범위(0~127)를 할당 받고 있는 기관들

A클래스 범위(0~127)

B클래스 범위(128~191)

C클래스 범위(192~223)

D클래스 범위(223~239) -> 멀티캐스트용

E클래스 범위(240~255) -> 미래 연구용

---

하나의 네트워크 구역을 구분할 줄 알아야 하는데, 각 장치의 인터페이스가 하나의 네트워크 구역이 된다고 생각하면 쉬움

(두 장치의 링크가 연결되어야 하나의 네트워크로 봄, 연결이 안되어 있으면 네트워크가 되지 않음 -> neighbor 관계)

![image](https://blog.kakaocdn.net/dna/viwC5/btsCRfMTELd/AAAAAAAAAAAAAAAAAAAAAAaBtJX2efzO5isJoqocT7IBfFIa8M0nzR5lalcyFyTR/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1767193199&allow_ip=&allow_referer=&signature=k0rInd8tRaePxHrSzJta15SHQag%3D)
네트워크(브로드캐스트 도메인) 구분 예시1

![image](https://blog.kakaocdn.net/dna/cGWnZx/btsCQphYuyS/AAAAAAAAAAAAAAAAAAAAAMYSDnJ2eB3OItp5ANgZQXJK9Duf4ymAVlcKuGwQm_gZ/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1767193199&allow_ip=&allow_referer=&signature=IIZvDh9o6MnCTpM1vbjTXm7zFIo%3D)
네트워크(브로드캐스트 도메인) 구분 예시2

\* 꼭 라우터가 아니더라도 L3 스위치는 라우팅 기능이 있기 때문에 네트워크를 나눌 수 있음

![image](https://blog.kakaocdn.net/dna/Jn2GS/btsCTwOirCG/AAAAAAAAAAAAAAAAAAAAAE4y6RFuAluyGsfp2yXaTBQRErOPj_XEuOBt2aZIGkol/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1767193199&allow_ip=&allow_referer=&signature=qVIwaaZEnh3LoKlCjK%2BxAOIrD%2B4%3D)

3개의 네트워크가 됨

ex) 192.168.1.0/24 대역을 할당 받음

\-> 3개의 네트워크가 필요하니까 2의2제곱(4)가 네트워크 비트가 되고, 2의6제곱(64)가 호스트 비트가 됨

\-> 하나의 네트워크 당 64개의 호스트 사용 가능(0~64/65~127/128~191/192~255)

\-> 남는 네트워크 1개는 쩔수…

\=> 이러한 과정을 서브넷팅 한다고 함

---

IP = Network + Host(IP는 Network Bit와 Host Bit로 구성되어 있음)

서브넷팅(Subnetting)

-   필요한 네트워크/호스트의 개수 기준을 정해야 함
-   (2의 n제곱 - 2)만큼 사용가능

**네트워크주소(시작주소), 브로드캐스트 주소(마지막 주소)는 예약 주소로 사용 불가**

-   서브넷팅을 IP 개수 여유 있게 설계하는 것이 좋음(미래 확장을 대비해)

1\. Host 기준(80개의 호스트 필요)

2의 7제곱(128)을 Host Bit로 잡아야 함

호스트 개수 기준으로 잡았기 때문에 2의 1제곱을 Network Bit, 2의 7제곱을 Host Bit

\=> 126(128-2)개씩 2개의 네트워크 구성

2\. Network 기준(5개의 네트워크 필요)

2의 3제곱(8)을 Network Bit로 잡아야 함

네트워크 개수 기준으로 잡았기 때문에 2의 3제곱을 Network Bit, 2의 5제곱을 Host Bit

\=> 30(32-2)개씩 8개의 네트워크 구성

---

Subnet Mask

-   서브넷의 범위를 표현(네트워크 대역을 의미하는 Subnet과는 다른 개념)
-   클래스마다 정의되어 있음
-   A Class : /8
-   B Class : /16
-   C Class : /24
-   \=> Prefix 표현( 11111111.00000000.00000000.00000000 -> /8 )

-   규칙
-   1) '1'의 연속 또는 '0'의 연속
-   ex) 10100000.00110000.00000000.11111010 -> x
-   2) '1'은 접두, '0'은 접미
-   ex) 00000000.00000000.00000000.11111111 -> x

---

우리가 사용하는 IPv4 주소체계 자체가 2의 32제곱으로 정해져 있으니, Network Bit가 8개(/8)라면 Host Bit가 자동으로 24개가 됨

\=> 숫자가 너무 크니 한 옥텟만 짤라서 보면,

Network Bit가 3개면 총 네트워크는 2의 3제곱(8)개이고, Host Bit는 각 네트워크마다 2의 5제곱(32)개씩 있는 것이다.

하나의 네트워크 당 32개의 호스트가 총 8 네트워크(32 \* 8 = 255)

ex) 호스트의 개수가 50를 할당해야 하는 네트워크의 서브넷팅을 하여라

50을 충족시키려면 2의 6제곱(64)을 Host Bit로 두어야 한다.

Network Bit는 자동으로 2의 2제곱(4)개가 된다.

\-> 62개(64-2)의 호스트씩 총 4개의 네트워크 구성하여, 50개 사용하고 12개가 남음(남는건 쩔수…)

---

![image](https://blog.kakaocdn.net/dna/orBqT/btsCODAVhoP/AAAAAAAAAAAAAAAAAAAAACuQVQx6d3Xmg2FFyY37Giktq59A4AUkXlQA_PMnQ_1f/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1767193199&allow_ip=&allow_referer=&signature=xZf9IUtdHKkUPQDpaS%2BFOrn1HZk%3D)

\=> 실질적인 IP를 각 네트워크 별로 줘야 함

​

ex) 172.16.0.0/16 네트워크에서 각 네트워크 당 호스트가 500개가 필요한 경우, 서브넷팅을 하여라.

500 = 2의 n제곱 - 2 => Host Bit 9개 필요(512)

(세번째 옥텟의 2의 1제곱 비트까지 호스트 비트, 호스트 비트로 운용되는 비트만 생각해서 해당 옥텟에 적용시킴)

172.16.0.0/23 ~ 172.16.1.255/23

172.16.2.0/23 ~ 172.16.3.255/23

172.16.4.0/23 ~ 172.16.5.255/23

172.16.6.0/23 ~ 172.16.7.255/23

….

172.16.252.0/23 ~ 172.16.253.255/23

172.16.254.0/23 ~ 172.16.255.255/23

\=> 각 네트워크 당 510(512-2)개 호스트 사용 가능한 네트워크 총 128개 구성

ex) 14.14.0.0/16 네트워크에서 각 네트워크 당 호스트가 500개가 필요한 경우, 서브넷팅 하여라.

14.14.0.0/23 ~ 14.14.1.255/23

14.14.2.0/23 ~ 14.14.3.255/23

14.14.4.0/23 ~ 14.14.5.255/23

14.14.6.0/23 ~ 14.14.7.255/23

...

14.14.252.0/23 ~ 14.14.253.255/23

14.14.254.0/23 ~ 14.14.255.255/23

\=> 각 네트워크 당 510(512-2)개 호스트 사용 가능한 네트워크 총 128개 구성

---

CIDR(Class Less Domain Routing) 기법

\- 14.14.0.0/16 대역이 A클래스 범위 내이지만, 클래스 개념을 없앰

ex) 14.14.64.0/22의 ip 대역을 할당 받음

\- 1024개의 호스트 개수를 사용 가능

\- /22는 세번째 옥텟의 두개의 비트를 호스트 비트로 사용, 네번째 옥텟을 모두 호스트 비트로 사용

\-> 14.14.0.0/22 ~ 14.14.3.255/22

14.14.4.0/22 ~ 14.14.7.255/22

14.14.8.0/22 ~ 14.14.11.255/22

14.14.12.0/22 ~ 14.14.15.255/22

…

14.14.12.0/22 ~ 14.14.15.255/22

ex) 14.14.64.0/24의 네트워크 대역을 할당 받았는데, 5개의 부서 중 부서 당 80, 30, 20, 20, 20개의 호스트가 필요하다.

\- 총 170개의 호스트가 필요하다

\- 제일 많이 필요한 호스트 개수에 맞춰 서브넷팅을 진행하고, 서브넷팅 한 네트워크를 다시 그 필요한 개수의 호스트만큼 서브넷팅

1) 80개 기준

\- 128(2의 7제곱)의 7비트를 호스트 비트로 사용

\- 2(2의 1제곱)를 1비트를 네트워크 비트로 사용

\- 1 0000000

\- 2개의 네트워크, 하나의 네트워크 당 126개(128-2) 사용 가능

\- 14.14.64.0/25 ~ 14.14.64.127/25 -> 80개 호스트 필요한 부서에 사용

\- 14.14.64.128/25 ~ 14.14.64.255/25

2) 30개 기준/20개 기준

\- 14.14.64.128/25을 서브넷팅

\- 1 11 00000 -> 맨 앞의 1비트는 이미 80개 서브넷팅에 네트워크 비트로 사용함

\- 32(2의 5제곱)개씩 5비트를 호스트 비트로 사용

\- 4(2의 2제곱) 2비트를 네트워크 비트로 사용

\- 4개의 네트워크, 하나의 네트워크 당 30개(32-2) 사용 가능

\- 14.14.64.128/27 ~ 14.14.64.159/27 -> 30개 호스트 필요한 부서에 사용

\- 14.14.64.160/27 ~ 14.14.64.191/27 -> 20개 호스트 필요한 부서에 사용

\- 14.14.64.192/27 ~ 14.14.64.223/27 -> 20개 호스트 필요한 부서에 사용

\- 14.14.64.224/27 ~ 14.14.64.255/27 -> 20개 호스트 필요한 부서에 사용

\=> 딱 5개의 부서에 맞게 나눌 수 있음 -> 5개의 네트워크는 2의 n 제곱에 맞지 않음, 불가능!!!

\=> 2의 n 제곱 에 맞춰서 네트워크 개수도 만듦, 고정된 길이로만 동일하게 나눈다는 뜻

(FLSM, 하나의 길이로만 서브넷을 나누는 것)

VLSM(Variable Length Subnet Mask, 가변 길이 서브넷 마스크) <-> FLSM(Fixed Length Subnet Mask, 고정 길이 서브넷 마스크)

\- 14.14.64.0/24를 /25길이, /27길이로 서브넷팅 해 다양한 길이를 가짐

\- IP의 누수를 최소화할 수 있는 기술

​