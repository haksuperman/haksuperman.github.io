---
title: Default Routing      # 글 제목
date: 2024-01-01 20:19:00 +0900 # 작성 시간
categories: [ON-PREMISE, NETWORK]        # [대분류, 소분류]
tags: [network, routing, default routing]     # 태그 (반드시 소문자로 시작 권장)
---
SDN(Software Defined Network)

\- 라우팅과 같은 반복적인 작업을 해야 하는 것을 대신해 줌(네트워크의 지휘자 역할)

\- 소프트웨어 프로그래밍을 통해 네트워크 경로 설정과 제어 및 복잡한 운용관리를 편리하게 처리할 수 있는 차세대 네트워킹 기술

\* 프로세스(Process) : 현재 메모리에 상주해 실행 중인 프로그램

라우터 장비는 라우팅 프로세서가 라우팅을 위해 라우터 메모리에 상주시키고, 1, 2, 3계층 통신으로 라우팅을 하는데, 이 과정도 생략하고 싶어져 3계층 정보, 2계층 정보를 복사해 1계층에서 바로 전송하도록 함

(control plain / data plain)

​

---

#### Static Routing 복습

![image](/assets/img/posts/Network/Network10_01.png)
![image](/assets/img/posts/Network/Network10_02.png)

동일 네트워크(게이트웨이)와 connected 라인 핑 되는지 확인

\-> PC1은 10.0.12.0/24 대역으로 통신할 때 내가 모르는 네트워크이기 때문에 게이트웨이로 보내고, 게이트웨이인 R1에서 돌아오는 PC1의 대역을 라우팅 테이블에서 확인(connected 라인) 후 응답해줌

​

\* 게이트웨이(Gateway) : 내가 알지 못하는 네트워크(내 대역 이외 네트워크)에는 게이트웨이로 감(Default Gateway)

​

PC1(10.0.10.2/24) -> R2(10.0.12.2/24)

![image](/assets/img/posts/Network/Network10_03.png)

R2로는 통신 안됨

\-> R2(10.0.12.2)로 갔다가 PC1의 대역 라우팅 정보가 없어 돌아오지 못함(timeout)

![image](/assets/img/posts/Network/Network10_04.png)

R2에 PC1의 네트워크 대역(10.0.10.0/24)의 경로를 알려줌

PC1(10.0.10.2/24) -> R3(10.0.23.3/24)

![image](/assets/img/posts/Network/Network10_05.png)
![image](/assets/img/posts/Network/Network10_06.png)
![image](/assets/img/posts/Network/Network10_07.png)
![image](/assets/img/posts/Network/Network10_08.png)

PC1(10.0.10.2/24) -> R4(10.0.23.4/24)

![image](/assets/img/posts/Network/Network10_09.png)

불가

\-> 가는 길은 위에 실습에서 진행함(10.0.34.3/24로 보낼 때)(지금 10.0.45.0/24 대역으로 보내는 것이 아니기 때문에 가는 길은 문제 없음),

돌아오는 경로에 문제. R4에 PC1의 네트워크 대역(10.0.10.0/24) 라우팅 정보가 없음

![image](/assets/img/posts/Network/Network10_10.png)

![image](/assets/img/posts/Network/Network10_11.png)

전 구간 통신 가능하도록 하기

![image](/assets/img/posts/Network/Network10_12.png)
![image](/assets/img/posts/Network/Network10_13.png)
![image](/assets/img/posts/Network/Network10_14.png)
![image](/assets/img/posts/Network/Network10_15.png)
![image](/assets/img/posts/Network/Network10_16.png)
![image](/assets/img/posts/Network/Network10_17.png)
![image](/assets/img/posts/Network/Network10_18.png)
![image](/assets/img/posts/Network/Network10_19.png)

---

### Default Routing

내부 네트워크의 라우터에서도 디폴트 게이트웨이처럼 모르는 네트워크(Unknwon Network)에 대해 모두 KT(ISP)로 보냄

(0.0.0.0 0.0.0.0)

\-> 라우팅 테이블의 우선순위가 가장 낮음, 내가 모르는 네트워크는 모두 여기로 보냄(가장 마지막 줄에 해당)

\= Static Default Routing

![image](/assets/img/posts/Network/Network10_20.png)

모든 네트워크를 의미하는 0.0.0.0/0의 Static Default 경로를 지정하려면 모든 네트워크를 가리킬 수 있는 방향이 하나여야 한다(stub network)

​

\* Stub Network

\- 하나의 네트워크에서 외부의 네트워크로 나가고 들어오는 경로가 오직 하나뿐인 경우

\- 즉, 외부에서 들어와 결국은 종료되는 네트워크를 말함(다른 경로가 없어 뒷문으로 나가지 못함)

\- 이러한 네트워크 구성에서는 Default Routing이 유용함(굳이 하나하나 라우팅해도 상관은 x)

\-- 경로를 찾지 못한 모든 네트워크들의 경로를 미리 정해 놓는 것

(내가 모르는 네트워크(Unknwon Network)들은 모두 여기로 가라)

\-- ex) **#(config) ip route 0.0.0.0 0.0.0.0 \[다음 홉의 ip\]**

**\-> 다음 홉의 ip를 쓰는 것이 제일 정확하다(R1 라우터의 게이트웨이까지는 동일 네트워크로 아니까 적어줄 수 있음)**

**\-> 내가 한 것처럼 R1의 인터페이스를 지정하면 R1과 R2가 Point-to-Point일 때는 상관없지만, Point-to-Multi면 다음 홉을 몰라서 어디로 나가야 통짜인지 모름**

![image](/assets/img/posts/Network/Network10_21.png)
![image](/assets/img/posts/Network/Network10_22.png)

해당 다수의 네트워크를 0.0.0.0/0으로 하나로 묶음

![image](/assets/img/posts/Network/Network10_23.png)

해당 다수의 네트워크를 하나로 묶음(Static Default)

​

AWS와 같은 클라우드 환경에서도 여러 개의 사설 IP를 NAT로 변환해 나가는 공인 IP 대역들을 0.0.0.0/0으로 그냥 싸그리 묶어버림(나가는 방향이 하나여야 함)

![image](/assets/img/posts/Network/Network10_24.png)

Static Default로 묶어서 전 구간 통신 가능하도록 설정

![image](/assets/img/posts/Network/Network10_25.png)

이 개념으로 진행(묶은 곳 안은 KT(ISP) 관할로 생각)

![image](/assets/img/posts/Network/Network10_26.png)
![image](/assets/img/posts/Network/Network10_27.png)
![image](/assets/img/posts/Network/Network10_28.png)
![image](/assets/img/posts/Network/Network10_29.png)

\=> 나가는 출구가 하나인 라우터(Static Default 설정이 가능한 라우터)는 어떤 ip가 와도 그 인터페이스 방향으로 밖에 못감(0.0.0.0/0 묶어서 그냥 너네 다 일로가)