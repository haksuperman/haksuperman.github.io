---
title: Routing 기본 개념      # 글 제목
date: 2024-01-01 18:12:00 +0900 # 작성 시간
categories: [ON-PREMISE, NETWORK]        # [대분류, 소분류]
tags: [network, routing, defaultrouting, ip, nat, acl]     # 태그 (반드시 소문자로 시작 권장)
---
## Routing

-   출발지(IP)에서 목적지(IP)까지 도달하기 위한 일련의 경로 탐색 과정
-   길찾기를 해주는 가이드 역할이 라우터
-   정확히는 몰라도 '일단 동쪽으로 가라' 가이드해 주는 동서남북 방향은 라우터의 인터페이스(s 0/0, fa 0/1 등)로 대응함
-   이러한 과정을 모든 라우터가 반복하는 것(점차 가까워지는 셈)

 \* 라우팅으로 방향만 제시 후 해당 네트워크(LAN 구간)에 접근했을 때에는 MAC 통신을 하기 때문에 IP가 아닌 MAC 주소를 보고 찾아 감(ex. 어떤 PC가 호스트 주소 1에 해당하는지, 그 PC의 MAC 주소는 뭔지 파악 후 찾아 감)

####  1\. Default Routing

-   어디로 가야 할 지 모를 때 일단 Default Routing(=Static Routing)으로 인천공항에 해당하는 곳을 먼저 가리킴(Default Routing의 주소지(Default Gateway)는 모든 곳을 갈 수 있어야 함)

####  2\. IP

1) 유일성

| ex) | 서울시 종로구 묘동 | 1번지 |
| --- | --- | --- |
|   | 192.168.168.x | 1 |

\=> 네트워크 주소와 호스트 주소는 서브넷 마스크로 구분

-   0.0.0.0 : 모든 IP를 의미(내가 아는 나의 IP는 제외하기 때문에 Unknown Network로 표현)                                                            (ex. 0.0.0.0/0 : 내가 모르는 세상의 모든 목적지)
-   Default Routing 시 유용
-   IPv4 : 2의 32제곱(43억)개 사용 가능, 주소 개수의 부족으로 중복 IP 가능한 방법을 고안함(사설 IP)

-   사설 IP(폐쇄 사설망)
-   사설 IP 범위

| 10.0.0.0/8 |
| --- |
| 172.16.0.0/12 |
| 192.168.0.0/16 |

-   사설 IP의 범위 내에서는 중복 가능(IP의 유일성은 지켜야 하니, 동일 네트워크 내에서는 불가)
-   공용망을 거쳐서 동일한 사설 IP를 사용할 수 없음 -> 공용망이 연결되어 있는 다른 네트워크 간의 동일 IP 사용불가  (너네 울타리 안에서만 맘대로 써라) \=> 인터넷망과 네트워크망의 구분을 할 줄 알아야 함
-   프라이빗한 환경이기 때문에 보안 상 뛰어남

-   NAT
-   프라이빗한 사설 네트워크에서 공용망에 접근하고 싶을 때, 사설 IP의 중복 때문에 접근하지 못하는 것이니 공인 IP로 변환해 접근하도록 함(NAT) -> 공용망에 접근할 수 있는 실질적인 연결(미디어), 접근할 공인 IP를 부여 받아야 함
-   \=> 하나의 폐쇄 사설망을 하나의 클라우드로 생각하면 됨(이러한 폐쇄 사설망 환경은 ACL을 화이트리스트로 진행)
-   \=> **클라우드에서 굉장히 중요한 개념! NAT!!(클라우드에서 제공해주는 가상PC의 IP들이 모두 사설IP, 이를 NAT를 통해 공인IP로 변환 후 제공)**
-   반대로 사설IP로 WEB 서버 구성 후 공인 IP 하나를 할당 받아 NAT로 변환해 내부 사설 WEB 서버에 접근하도록 함, 모든 사설망의 서버들이 이런 경우면 의미가 없겠지만, 외부에서 접근할 필요가 없는 서버들도 많기 때문에 사설 IP가 필요한 것

#### 3\. Routing 시 보안적 요소

   1) 위험 요소 정의

   2) 필터링(Allow/Deny)

   \=> ACL(Access Control List), AL(Access-List), NACL(Network Access Control List)

   \=> ACL은 IP 기반으로만 필터링(방화벽은 응용프로그램, 패킷 종류 등 다양한 기준으로 필터링 가능)