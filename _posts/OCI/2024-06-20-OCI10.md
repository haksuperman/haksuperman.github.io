---
title: "[OCI] 데이터베이스 설치 및 기본 구성(with. MySQL)"       # 글 제목
date: 2024-06-20 21:25:00 +0900 # 작성 시간
categories: [CLOUD, OCI]        # [대분류, 소분류]
tags: [oci, cloud, oraclecloud, oraclecloudinfrastructure, database, mysql]     # 태그 (반드시 소문자로 시작 권장)
---
[[OCI] 통신을 위한 네트워크 설정 (with. 시큐리티 리스트, Bastion 세션, 서버 자체 방화벽)](https://haksuperman.github.io/posts/OCI09.md)
이렇게 진행한 가상 머신 인스턴스 중 프라이빗 서브넷에 생성한 oci-demo-db 가상 머신에 MySQL 데이터베이스를 설치해 데이터베이스 서버로 사용할 것이다.

## 0. oci-demo-db 가상 머신 인스턴스 원격 접속
![image](https://blog.kakaocdn.net/dna/b3Yjnd/btsH6gl8lPO/AAAAAAAAAAAAAAAAAAAAAIeE6loaVOLjK3TfiCurVrhYxgSKzpcY00aGTCVA1Fr0/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1767193199&allow_ip=&allow_referer=&signature=5H9edIFkxCfFhyLup9RSFHYn3x4%3D)

## 1\. MySQL용 yum 리포지터리 다운

1. MySQL용 yum 리포지터리 다운
```shell
sudo rpm -ivh https://dev.mysql.com/get/mysql80-community-release-el8-3.noarch.rpm
```
![image](https://blog.kakaocdn.net/dna/8wKa4/btsH6wQEr7g/AAAAAAAAAAAAAAAAAAAAACDWW6lxGkoln3NdTCCUWHC995niFwnR9YPeZ0sxCf1f/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1767193199&allow_ip=&allow_referer=&signature=AmPCLb9%2BXh3LRbvspD4WOqm0M5k%3D)


## 2\. 언어팩 설치
1. glib-langpack-en, glib-langpack-ko 언어팩 설치
(yum 리포지터리를 활성화하거나 MySQL을 설치할 때 발생할 수 있는 언어 설정 관련 에러 "Failed to set locale, defaulting to C.UTF-8" 오류를 방지하기 위해)
    ```bash
    sudo yum install -y glibc-langpack-en glibc-langpack-ko
    ```
![image](https://blog.kakaocdn.net/dna/8xq2x/btsH7AX1NBg/AAAAAAAAAAAAAAAAAAAAAFJwAQDij3BRjWjkYiA6n5cSCNvrP4SvOa8U-sPlx9WE/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1767193199&allow_ip=&allow_referer=&signature=iKEtCr0cVB48fkPm5waaE4CUDCc%3D)

2. yum 리포지터리 활성화
    ```shell
    sudo yum-config-manager --enable mysql80-community
    ```
![image](https://blog.kakaocdn.net/dna/baqbII/btsH5kQCRKo/AAAAAAAAAAAAAAAAAAAAACUy-HfoZkPPl1W6S8VVbuK50FBnoYJvt-T6B2s4nChn/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1767193199&allow_ip=&allow_referer=&signature=TjPJbTqW77akQs83HpHHaS14uhA%3D)

3. mysql80-community 활성화 확인
    ```shell
    sudo yum repolist all | grep mysql
    ```
![image](https://blog.kakaocdn.net/dna/be3OIA/btsH6Co6Md0/AAAAAAAAAAAAAAAAAAAAAC8-4Gbwcs-X-uF4i0UkkJ1ZkUxiBP2eyB085F_ZywgT/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1767193199&allow_ip=&allow_referer=&signature=Lp3KhhSFgkj6c0Kq%2FFaqOueaqGI%3D)

## 3\. 최신 MySQL 설치 전 기존 MySQL 모듈 비활성화
1. 최신 버전의 MySQL 모듈을 다운 받기 위해 오라클 리눅스에 기본적으로 설치되어 있는 기존 MySQL 모듈을 비활성화
    ```shell
    sudo yum module -y disable mysql
    ```
![image](https://blog.kakaocdn.net/dna/lKquF/btsH5NShpS4/AAAAAAAAAAAAAAAAAAAAAP7w_VhY_foNlpEjiMeIzfJ0-QhG1Q8WrT9fmhrg6uFQ/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1767193199&allow_ip=&allow_referer=&signature=ZLwtFOrLldQPQBSK4iakWsaK80U%3D)

## 4\. MySQL 설치
1. MySQL Community Server 설치
![image](https://blog.kakaocdn.net/dna/GoFvE/btsH5UXXYsQ/AAAAAAAAAAAAAAAAAAAAAAA2muDMfi-gJz5do4yKy3MB1d2UASQhKP_aixqCBvQQ/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1767193199&allow_ip=&allow_referer=&signature=2phK9quJFVgcWqEmZdUub52G6dI%3D)

#### ※ GPG 에러
- MySQL 패키지가 제공한 GPG 키와 일치하지 않아서 발생하는 에러이다.
\-> GPG 키를 가져와 시스템에 추가해야 한다.
![image](https://blog.kakaocdn.net/dna/vWf24/btsH6dJPnMK/AAAAAAAAAAAAAAAAAAAAAFP-jm45pBnuyyKej1LTNEfohy_BnuIkie3o7rkFRhY0/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1767193199&allow_ip=&allow_referer=&signature=XzzScxtps8D822h2nN0E02eAzIM%3D)

- RPM-GPG-KEY-mysql-2023이 새로 추가되어서 2023도 import 해주기
![image](https://blog.kakaocdn.net/dna/snffh/btsH5MsAL9i/AAAAAAAAAAAAAAAAAAAAABnatWQgk2iFrn56F2qVgKYQ7J5UqKwOnXo0W7zocz2D/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1767193199&allow_ip=&allow_referer=&signature=QNI%2Fcdft2zV2VnqBbhqUBse7ZQI%3D)

- 설치 성공! 
![image](https://blog.kakaocdn.net/dna/cOFoPz/btsH6PBR03W/AAAAAAAAAAAAAAAAAAAAAH7KIhljnxFo7ahQCG5wnNRBoMCgYb7_pvTEaa5CV7hO/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1767193199&allow_ip=&allow_referer=&signature=KMM0a%2FWeAcahBBsDAz5xtQS9bnc%3D)

## 5\. MySQL 데몬 실행 및 자동 시작 설정
1. MysQL 데몬 실행 및 재부팅 시 자동 실행
    ```shell
    sudo systemctl start mysqld
    sudo systemctl enable mysqld
    sudo systemctl status mysqld
    ```
![image](https://blog.kakaocdn.net/dna/cYUJrt/btsH6CbKwFX/AAAAAAAAAAAAAAAAAAAAAFOyUtpt_xvnBD5RW7Eg9nZzDlB_9H4DYApYNQFDZ7QM/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1767193199&allow_ip=&allow_referer=&signature=UqIDE0VcodQYqYo6pnDQyGAAUbo%3D)


## 6\. MySQL 접속 후 root 패스워드 설정
1. root 접속을 위한 초기 패스워드 확인(/var/log/mysqld.log 파일에서 확인 가능)
    ```shell
    sudo grep 'temporary password' /var/log/mysqld.log
    ```
![image](https://blog.kakaocdn.net/dna/cAsyMI/btsH6YFlEwI/AAAAAAAAAAAAAAAAAAAAABlh9uBRbrobwwhmCUkND8TziTsjIXDxsXcC0rWLTQQb/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1767193199&allow_ip=&allow_referer=&signature=gtmxi8bS7NkBW4lN96FB0HZztoc%3D)

2. root 계정으로 MySQL 접속
    ```shell
    mysql -uroot -p \<확인한 초기 패스워드 입력>
    ```
![image](https://blog.kakaocdn.net/dna/RytD4/btsH6TqKdcY/AAAAAAAAAAAAAAAAAAAAAI2xT2DqULcXRGOnWnD5m2WD-ufbkRqSb5URxpYnHr2z/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1767193199&allow_ip=&allow_referer=&signature=9nDECO%2ByZp2bs4b5rT%2Btp2dWJUI%3D)

3. SQL문을 이용해 root 계정 패스워드 변경
    ```shell
    ALTER USER 'root'@'localhost' IDENTIFIED BY '<변경할 패스워드 입력>';
    ```
![image](https://blog.kakaocdn.net/dna/42277/btsH61oxU4y/AAAAAAAAAAAAAAAAAAAAAA-QKEoAZ8a2DJe3V6Dr10H-7aa9vrG70m25jSK5ooxH/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1767193199&allow_ip=&allow_referer=&signature=8PfoPdttEa9baN7Y8wo6PNc%2Bn8A%3D)

## 7\. 실습 데이터베이스 생성
1. 실습용 데이터베이스 test 생성, user 유저 생성, 권한 부여 및 적용
    ```shell
    create database test;
    create user 'root'@'%' identified by '<패스워드 입력>';
    grant all privileges on \*.\* to 'root'@'%' with grant option;
    flush privileges;
    ```
![image](https://blog.kakaocdn.net/dna/pvmxH/btsH7EsP7Yd/AAAAAAAAAAAAAAAAAAAAALi-prSkVSr2qIByDP-yxvSDe3mbG_kAlKI_7IGXdtc0/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1767193199&allow_ip=&allow_referer=&signature=kz%2BFegS80gZUwp6QheJaP%2F7JMx0%3D)