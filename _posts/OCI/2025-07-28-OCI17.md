---
title: "[OCI] LB Ruleset을 통한 도메인 리다이렉트(Domain Redirect) 구현"       # 글 제목
date: 2025-07-28 16:51:00 +0900 # 작성 시간
categories: [CLOUD, OCI]        # [대분류, 소분류]
tags: [oci, cloud, oraclecloud, oracle cloud infrastructure, lb, loadbalancer, ruleset, domain redirect]     # 태그 (반드시 소문자로 시작 권장)
---

> **haksuperman.site → haksuperman-oci.site**
> - DNS Zone이 아닌 Load Balancer에서 구현한 방법으로, 이외 다양한 방법이 존재할 수 있습니다.<br>
> (Hostname을 통해 Listener를 분기시켜, Target Listener로 리다이렉션 시키는 방법)
> - 모든 환경(웹 페이지, 도메인)은 테스트로 구성된 환경입니다.
{: .prompt-info }

## 1. Solution

1. 'Source Listener'와 'Target Listener'를 Hostname을 통해 구분
2. 'Source Listener'로 접속할 경우, 'Target Listener'로 리다이렉션
![image](https://blog.kakaocdn.net/dna/KsOoY/btsPCTC82YI/AAAAAAAAAAAAAAAAAAAAAKzkUJdE5dNomGPwHtxmn-pWGINImhANy8dcGdZIY9Np/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1767193199&allow_ip=&allow_referer=&signature=i%2BMQqAFfRKRSiFrbRyeGhczuojA%3D)

## 2. 설정

### 2.1. Source Domain Hostname 생성

Source Domain에 사용되는 모든 Hostname 생성<br>
ex) haksuperman.site, www.haksuperman.site, test1.haksuperman.site ...
![image](https://blog.kakaocdn.net/dna/A2Hx4/btsPB79GSU4/AAAAAAAAAAAAAAAAAAAAAGGi0QT6cdyylNKvuSB_Avs6GCkY-g0sc3pxiDgNdRBy/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1767193199&allow_ip=&allow_referer=&signature=yqMtwZ5RtkZ%2FqyYJgzCpRzvYm70%3D)

### 2.2. Source Domain Listener 생성 (구성되어 있는 경우 생략)

1. Name : \<적절한 이름 입력>
2. Protocol : HTTPS
3. Port : 443
4. Certificate : 미리 등록한 SSL 인증서 선택
![image](https://blog.kakaocdn.net/dna/cQFSaF/btsPAK1TWnt/AAAAAAAAAAAAAAAAAAAAAP8_DC8B3Kpem9vjWncXe1IyQQFWTmtmeplZxioL0FNq/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1767193199&allow_ip=&allow_referer=&signature=3ouwTdO0L2qMNOAYJxRkId8IDrk%3D)
5. Backend set : \<Web서버가 구성되어 있는 Backend set 선택>

### 2.3. Source Domain Listener Hostname 지정
1. SourceDomain Listener 우측 액션 메뉴 선택
![image](https://blog.kakaocdn.net/dna/A2GjV/btsPCLE2Ymj/AAAAAAAAAAAAAAAAAAAAABx42BVvTH_cETxA6R06ZO93NurWC0wIRHFd7h8F3kby/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1767193199&allow_ip=&allow_referer=&signature=BxAn%2FP%2BXyliHZ79UUD%2FGfIjGzaI%3D)

2. 중간 Hostnames 항목 Hostname 선택 (다중 선택 가능)
![image](https://blog.kakaocdn.net/dna/brB6tC/btsPBkhmFYk/AAAAAAAAAAAAAAAAAAAAANT4MsycIjfncb2qPLLlfXhLrQPv-ZKUQYBGcJ6cdNRH/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1767193199&allow_ip=&allow_referer=&signature=XtEr1yKF%2BxGNvghaTktO5bZldps%3D)

3. Hostnames 확인 → 모든 Source Domain의 리다이렉션으로, Source Domain Listener의 Hostname 별 분기는 필요 없는 것으로 판단
![image](https://blog.kakaocdn.net/dna/oYdEa/btsPC63gOeB/AAAAAAAAAAAAAAAAAAAAAK9t9QOi6YyudV91d8Vo7331Nm58B8ZjJNaQOVn_Pjtu/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1767193199&allow_ip=&allow_referer=&signature=xmwB%2Fxiom4L6U4Iscrxm%2BC0%2BnFY%3D)

### 2.4. Ruleset 생성

1. Name : \<적절한 이름 입력>
2. Specify URL redirect rules 선택<br>
    1. Source path : / (모든 경로)<br>
    2. Match type : Prefix match<br>
        - Force longest prefix match : 시스템은 들어오는 URL 경로의 시작 부분과 가장 길고 가장 잘 일치하는 규칙 경로 문자열을 탐색<br>
        - Exact match : 들어오는 URL 경로는 지정된 경로 문자열과 정확히 일치<br>
        - Prefix match : 들어오는 URL의 시작 부분은 지정된 경로 문자열과 정확히 일치<br>
        - Suffix match : 들어오는 URL의 끝 부분은 지정된 경로 문자열과 정확히 일치
3. Protocol : HTTPS
4. Host : \<Target domain 입력>
5. Port : 443
![image](https://blog.kakaocdn.net/dna/er3AGh/btsPB2tHKpe/AAAAAAAAAAAAAAAAAAAAANBeKRwiTS5HkqGnQNHIrqYvs6ljFJKK3m5huZnn9Qpm/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1767193199&allow_ip=&allow_referer=&signature=uVxZSM82pNPNh24zdP3FGSkWq5E%3D)

> 기존의 HTTP→HTTPS 리다이렉션 설정이 있는 경우, 해당 설정에 추가해도 무방합니다. (별도 HTTP→HTTPS 리다이렉션만 적용해야 하는 경우, 위 가이드와 같이 별도 Rule set 구성 필요)
{: .prompt-info }

### 2.5. Ruleset 적용
1. Source Domain Listener 우측 액션 메뉴 선택
2. 하단 Rule sets ‘+Additional rule set’ 선택
3. 위에서 생성한 Rule set 선택
![image](https://blog.kakaocdn.net/dna/bL67vL/btsPCQ0FoHk/AAAAAAAAAAAAAAAAAAAAAHFskP36zu_b_GiI3kXb80wzVZDZbe-5zJo5wZlw31ZR/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1767193199&allow_ip=&allow_referer=&signature=hTvN8%2BHqG2VAknY2HzffOYqL4Wc%3D)

## 3. 결과

### 3.1. 적용 전
![image](https://blog.kakaocdn.net/dna/b09Af1/btsPCJHhqTf/AAAAAAAAAAAAAAAAAAAAAHf3bFVVIru-bqM4fdnOmc6l_aOALdtqj-ENAvh3kCE0/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1767193199&allow_ip=&allow_referer=&signature=iwHsLI%2F%2B7auJ%2ByLi3yxUKbAwakw%3D)

### 3.2. 적용 후
![image](https://blog.kakaocdn.net/dna/bELlgl/btsPC5XBZXR/AAAAAAAAAAAAAAAAAAAAAAwER3Cnh3i_mcaT0VFb9lwhU28eCW_QPckQSPtz0qbp/img.png?credential=yqXZFxpELC7KVnFOS48ylbz2pIh7yKj8&expires=1767193199&allow_ip=&allow_referer=&signature=%2FlqFhGs0LaoZVer69%2Bp7QSo7nGY%3D)